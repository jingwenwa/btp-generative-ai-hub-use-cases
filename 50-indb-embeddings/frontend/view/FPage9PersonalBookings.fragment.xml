<core:FragmentDefinition
    xmlns:html="http://www.w3.org/1999/xhtml"
    xmlns:mvc="sap.ui.core.mvc" displayBlock="true"
    xmlns="sap.m"
    xmlns:f="sap.f"
    xmlns:tnt="sap.tnt"
    xmlns:card="sap.f.cards"
    xmlns:grid="sap.ui.layout.cssgrid"
    xmlns:core="sap.ui.core"
    xmlns:suite="sap.suite.ui.commons"
    xmlns:viz="sap.viz.ui5.controls"
    xmlns:layout="sap.ui.layout">
    
    <ScrollContainer height="100%" vertical="true" horizontal="false">
        <VBox class="sapUiMediumMargin">
            
            <!-- Header Section with Profile -->
            <f:Card class="sapUiMediumMarginBottom">
                <f:header>
                    <card:Header title="Personal Profile" subtitle="SPF Officer Details &amp; IPPT Information"/>
                </f:header>
                <f:content>
                    <VBox class="sapUiMediumMargin">
                        <HBox>
                            <!-- Profile Picture -->
                            <VBox class="sapUiMediumMarginEnd">
                                <Avatar src="sap-icon://person-placeholder" displaySize="XL" class="sapUiMediumMarginBottom"/>
                                <tnt:InfoLabel text="Active Duty" colorScheme="8" class="sapUiSmallMarginTop"/>
                            </VBox>
                            
                            <!-- Personal Details -->
                            <VBox class="sapUiLargeMarginBegin">
                                <Title text="{bookingsPage>/nsmanProfile/Name}" level="H2" class="sapUiSmallMarginBottom"/>
                                <Text text="Email: {bookingsPage>/nsmanProfile/Email}" class="sapUiTinyMarginBottom"/>
                                <Text text="Current Grade: {bookingsPage>/nsmanProfile/Current Grade}" class="sapUiTinyMarginBottom"/>
                                <Text text="PES Status: {bookingsPage>/nsmanProfile/PES Status}" class="sapUiTinyMarginBottom"/>
                                <Text text="Rank: {bookingsPage>/nsmanProfile/Rank Code}" class="sapUiTinyMarginBottom"/>
                                <Text text="Birthday: {bookingsPage>/nsmanProfile/Birthday}" class="sapUiTinyMarginBottom"/>
                            </VBox>
                        </HBox>
                    </VBox>
                </f:content>
            </f:Card>

            <!-- Current & Upcoming IPPT Bookings -->
            <f:Card class="sapUiMediumMarginBottom">
                <f:header>
                    <card:Header title="Current &amp; Upcoming IPPT Sessions" subtitle="Your Scheduled IPPT Tests"/>
                </f:header>
                <f:content>
                    <Table items="{localBookings>/bookings}" class="sapUiResponsiveMargin">
                        <columns>
                            <Column width="3rem">
                                <Text text=""/>
                            </Column>
                            <Column>
                                <Text text="Location"/>
                            </Column>
                            <Column>
                                <Text text="Date &amp; Time"/>
                            </Column>
                            <Column>
                                <Text text="Status"/>
                            </Column>
                            <Column>
                                <Text text="Actions"/>
                            </Column>
                        </columns>
                        <items>
                            <ColumnListItem>
                                <cells>
                                    <core:Icon src="sap-icon://workout" color="Default"/>
                                    <VBox>
                                        <Title text="{localBookings>location}" level="H4"/>
                                        <Text text="IPPT Session"/>
                                    </VBox>
                                    <VBox>
                                        <Text text="{localBookings>formattedDateTime}"/>
                                        <Text text="Booking ID: {localBookings>bookingNo}" class="sapUiTinyMarginTop"/>
                                    </VBox>
                                    <ObjectStatus text="{localBookings>bookingDetails/status}" state="Success"/>
                                    <HBox>
                                        <Button text="Reschedule" type="Transparent" icon="sap-icon://edit"/>
                                        <Button text="Cancel" type="Transparent" icon="sap-icon://decline"/>
                                    </HBox>
                                </cells>
                            </ColumnListItem>
                        </items>
                    </Table>
                </f:content>
            </f:Card>

            <!-- IPPT History -->
            <f:Card>
                <f:header>
                    <card:Header title="IPPT History" subtitle="Past IPPT results and performance tracking"/>
                </f:header>
                <f:content>
                    <Table items="{bookingsPage>/ipptHistory}" class="sapUiResponsiveMargin">
                        <columns>
                            <Column width="3rem">
                                <Text text=""/>
                            </Column>
                            <Column>
                                <Text text="Location"/>
                            </Column>
                            <Column>
                                <Text text="Date"/>
                            </Column>
                            <Column>
                                <Text text="Push Ups"/>
                            </Column>
                            <Column>
                                <Text text="Sit Ups"/>
                            </Column>
                            <Column>
                                <Text text="2.4km Run"/>
                            </Column>
                            <Column>
                                <Text text="Total Score"/>
                            </Column>
                            <Column>
                                <Text text="Grade"/>
                            </Column>
                        </columns>
                        <items>
                            <ColumnListItem>
                                <cells>
                                    <core:Icon src="sap-icon://history" color="Default"/>
                                    <VBox>
                                        <Title text="{bookingsPage>LOCATION_NAME}" level="H4"/>
                                    </VBox>
                                    <VBox>
                                        <Text text="{bookingsPage>TEST_DATE}"/>
                                    </VBox>
                                    <Text text="{bookingsPage>PUSH_UPS} reps"/>
                                    <Text text="{bookingsPage>SIT_UPS} reps"/>
                                    <Text text="{bookingsPage>RUN_TIME}"/>
                                    <ObjectNumber number="{bookingsPage>TOTAL_SCORE}" unit="pts" state="Good"/>
                                    <ObjectStatus text="{bookingsPage>GRADE}" state="Success"/>
                                </cells>
                            </ColumnListItem>
                        </items>
                    </Table>
                </f:content>
            </f:Card>

        </VBox>
    </ScrollContainer>
</core:FragmentDefinition>